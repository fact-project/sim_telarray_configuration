% vim: commentstring=\%%s
% Configuration file for FACT.
% See [1] for handbook.
% [1]: www.mpi-hd.mpg.de/hfm/bernlohr/sim_telarray/Documentation/sim_hessarray.pdf
% Chap. 10: configuration parameters
% Default values in parentheses


% ----- 10.1: global configuration parameters -----

min_photons                 = 100   % With fewer photons don't waste CPU time.
min_photoelectrons          = 20
store_photoelectrons        = 1
altitude                    = 2147. % m
only_triggered_arrays       = 1
only_triggered_telescopes   = 1
save_photons                = 0     % all: 3
maximum_events              = 1000
maximum_triggered_events    = 100
ignore_nontriggered_showers = 1
ignore_mc_data              = 0
output_format               = 1     % adc samples


% ----- 10.2: atmospheric transparency -----

atmospheric_transmission = atm_trans_2147_1_10_0_0_2147.dat

% ----- 10.3: source direction and reference position -----

reference_position = 0.,0.,0.

% ----- 10.4: other quasi-global parameters -----

maximum_telescopes = 1

% ----- 10.5: telescope-specific parameters -----

% ----- 10.5.1: telescopes -----

telescope_transmission = 0.8531 % Shadowing without camera body only
focal_length           = 488.9  % Effective focal length for camera.

% ----- 10.5.2: mirrors -----

mirror_class                   = 0     % segmented, spherical tiles
mirrors                        = 30
mirror_list                    = mirror_FACT.dat
mirror_reflectivity            = mirror-reflectivity.txt

% effects on psf:
mirror_reflection_random_angle = 0     % (0.0066) [degree] surface  quality
mirror_align_random_horizontal = all:0 % (0.0035,28,0.023,0) [deg,deg,-,-]
mirror_align_random_vertical   = all:0 % (0.0034,28,0.01,0) [deg,deg,-,-]
random_focal_length            = 0     % (7.4) [cm] spread in focal length of mirrors
mirror_align_random_distance   = 0     % (2) [cm] displacement from specified dish shape
focus_offset                   = 0.159 % [cm] 1./(1./488.9.-1./15.e5)-488.9 (focusing at 15 km distance)

% mirror_offset                = 10 % (130) [cm] offset from altitude rotation axis

% ----- 10.5.3: camera -----

camera_pixels        = 1440 % needs to be specified explicitly
camera_body_shape    = 0    % circular
camera_body_diameter = 53   % [cm] (only for shadowing)
camera_depth         = 81   % [cm]
camera_transmission  = 1.0  % eg plexiglass transmission, added ontop of pixel transmision, multiplied by camera_transmission
camera_config_file   = camera_FACT.dat

% camera_filter      = Aclylite8_tra_v2013ref.dat

% ----- 10.5.4: pmt/sipm sensors -----

quantum_efficiency = pde.txt
pm_average_gain    = 7.5e5

% ----- 10.5.5: additional afterpulsing -----

% % compile with ADDITIONALAFTERPULSING flag
% afterpulse_alternate = 0
% afterpulse_ratio     = 0.14
% afterpulse_threshold  % (4) [mean p.e.] needs to be configured
% afterpulse_scale
% afterpulse_max

% ----- 10.5.6: trigger -----

simple_threshold        = 1   % [p.e.s]
trigger_pixels          = 9   % this replaces the * in the Trigger file
trigger_telescopes      = 1
default_trigger         = AnalogSum
asum_threshold          = 1   % ceres: -192.387

% trigger_current_limit   = 0.2 % [mA], pixels above this limit are excluded from trigger

% ----- 10.5.7: electronics -----

num_gains                               = 1
channels_per_chip                       = 9
discriminator_pulse_shape               = pulse_shape.dat
discriminator_amplitude                 = 1
discriminator_threshold                 = 5
discriminator_time_over_threshold       = 10
discriminator_var_time_over_threshold   = 1
discriminator_sigsum_over_threshold     = 50
discriminator_var_sigsum_over_threshold = 5
discriminator_gate_length               = 10
discriminator_output_amplitude          = 9
discriminator_output_var_percent        = 10
discriminator_rise_time                 = 0
discriminator_fall_time                 = 0
discriminator_gate_length               = 10
discriminator_hysteresis
teltrig_min_time                        = 10
teltrig_min_sigsum

% ----- 10.5.8: (f)adcs -----

fadc_pulse_shape   = pulse_shape.dat
fadc_MHz           = 2000
fadc_bins          = 300      % 300 bins * 2000 MHz -> 150 ns
fadc_sum_bins      = 300
fadc_sum_offset    = 10
fadc_noise         = 2.815    % [ADC counts (r.m.s)] (4)
fadc_amplitude     = 22.553   % [arbitrary]
fadc_max_signal    = 4095     % 12-bit ADC
fadc_max_sum       = 16777215 % 24-bit sum is unlimited for all practical purposes (16-bit: 65535, 12-bit: 32767)

% fadc_per_channel = 1 % (1)
% fadc_pedestal (1) % [ADC counts]
% fadc_dev_pedestal (1)
% fadc_var_pedestal (0.75)
% fadc_err_pedestal (0.08)
% fadc_sysvar_pedestal (0.04)
% fadc_ac_coupled (1)
% fadc_sensitivity (1)  % [same as fadc_amplitude]
% fadc_var_sensitivity (0.02)
% fadc_sum_bins (0)
% fadc_sum_offset (0)

% ----- 10.5.9: nightsky background -----

nightsky_background = all:0.0

% ----- 10.5.10: calibration specific -----

laser_photons = 1
laser_events  = 1  % 1000

% ----- 10.5.11: output data options -----

% ----- 10.5.12: level of simulation detail -----

% ----- 10.5.13: pixel peak detection and timing -----

pulse_analysis  = 1
sum_before_peak = 15
sum_after_peak  = 15

% ----- 10.5.14: appearance of image plots -----

% ----- 10.5.15: for (meta) information only -----

array_config_name     = "FACT"
array_config_version  = "0.1"
array_config_variant  = "testing"
optics_config_name    = "FACT"
optics_config_version = "0.1"
optics_config_variant = "testing"
camera_config_name    = "FACT"
camera_config_version = "0.1"
camera_config_variant = "testing"
